(function(t){function e(e){for(var r,o,n=e[0],l=e[1],d=e[2],u=0,m=[];u<n.length;u++)o=n[u],s[o]&&m.push(s[o][0]),s[o]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(t[r]=l[r]);c&&c(e);while(m.length)m.shift()();return i.push.apply(i,d||[]),a()}function a(){for(var t,e=0;e<i.length;e++){for(var a=i[e],r=!0,n=1;n<a.length;n++){var l=a[n];0!==s[l]&&(r=!1)}r&&(i.splice(e--,1),t=o(o.s=a[0]))}return t}var r={},s={app:0},i=[];function o(e){if(r[e])return r[e].exports;var a=r[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=t,o.c=r,o.d=function(t,e,a){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(a,r,function(e){return t[e]}.bind(null,r));return a},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],l=n.push.bind(n);n.push=e,n=n.slice();for(var d=0;d<n.length;d++)e(n[d]);var c=l;i.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"021b":function(t,e,a){"use strict";var r=a("4acc"),s=a.n(r);s.a},"0a33":function(t,e,a){"use strict";var r=a("fc75"),s=a.n(r);s.a},"3e36":function(t,e,a){},4862:function(t,e,a){"use strict";var r=a("5cec"),s=a.n(r);s.a},"4acc":function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e);var r=a("2b0e"),s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",{attrs:{id:"inspire"}},[a("v-navigation-drawer",{attrs:{app:"",temporary:""},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[a("v-list",{attrs:{dense:"",nav:""}},[t._l(t.links,function(e){return a("v-list-item",{key:e.title,attrs:{to:e.url,link:""}},[a("v-list-item-icon",[a("v-icon",[t._v(t._s(e.icon))])],1),a("v-list-item-content",[a("v-list-item-title",[t._v(t._s(e.title))])],1)],1)}),t.loggedIn?a("v-list-item",{on:{click:t.logout}},[a("v-list-item-icon",[a("v-icon",[t._v("mdi-exit-to-app")])],1),a("v-list-item-content",[a("v-list-item-title",[t._v("Exit")])],1)],1):t._e()],2)],1),a("v-app-bar",{attrs:{app:"",color:"primary",dark:""}},[a("v-app-bar-nav-icon",{staticClass:"hidden-md-and-up",on:{click:function(e){t.drawer=!t.drawer}}}),a("v-toolbar-title",[a("router-link",{attrs:{tag:"span",to:"/"}},[t._v("\n        Ad Application\n      ")])],1),a("v-spacer"),a("v-toolbar-items",{staticClass:"hidden-sm-and-down"},[t._l(t.links,function(e){return a("v-btn",{key:e.title,attrs:{text:"",to:e.url}},[a("v-icon",{attrs:{left:""}},[t._v(t._s(e.icon))]),t._v("\n          "+t._s(e.title)+"\n        ")],1)}),t.loggedIn?a("v-btn",{attrs:{text:""},on:{click:t.logout}},[a("v-icon",{attrs:{left:""}},[t._v("mdi-exit-to-app")]),t._v("\n          Exit\n        ")],1):t._e()],2)],1),a("v-content",[a("router-view")],1),t.error?[a("v-snackbar",{attrs:{color:"error","multi-line":"multi-line",value:!0}},[t._v("\n      "+t._s(t.error)+"\n      "),a("v-btn",{attrs:{dark:"",text:""},on:{click:t.closeError}},[t._v("\n        Close\n      ")])],1)]:t._e()],2)},i=[],o={data(){return{drawer:!1}},computed:{error(){return this.$store.getters.error},loggedIn(){return this.$store.getters.isUserLoggedIn},links(){return this.loggedIn?[{title:"Orders",icon:"mdi-bookmark",url:"/orders"},{title:"New Ad",icon:"mdi-note",url:"/new"},{title:"My Ads",icon:"mdi-file-document-box",url:"/list"}]:[{title:"Login",icon:"mdi-lock",url:"/login"},{title:"Registration",icon:"mdi-face",url:"/registration"}]},loading(){return this.$store.getters.loading}},methods:{closeError(){this.$store.dispatch("clearError")},logout(){this.$store.dispatch("logout").then(()=>{"home"!==this.$route.name&&this.$router.push("/")})}}},n=o,l=(a("7362"),a("2877")),d=a("6544"),c=a.n(d),u=a("7496"),m=a("40dc"),p=a("5bc1"),v=a("8336"),h=a("a75b"),f=a("132d"),g=a("8860"),b=a("da13"),x=a("5d23"),y=a("34c3"),w=a("f774"),V=a("2db4"),C=a("2fa4"),_=a("2a7f"),k=Object(l["a"])(n,s,i,!1,null,"a816ce50",null),E=k.exports;c()(k,{VApp:u["a"],VAppBar:m["a"],VAppBarNavIcon:p["a"],VBtn:v["a"],VContent:h["a"],VIcon:f["a"],VList:g["a"],VListItem:b["a"],VListItemContent:x["a"],VListItemIcon:y["a"],VListItemTitle:x["c"],VNavigationDrawer:w["a"],VSnackbar:V["a"],VSpacer:C["a"],VToolbarItems:_["a"],VToolbarTitle:_["b"]});var L=a("f309");r["a"].use(L["a"]);var $=new L["a"]({icons:{iconfont:"mdi"}}),I=a("8c4f"),A=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-container",{attrs:{fluid:""}},[t.loading?[a("v-container",[a("v-layout",[a("v-flex",{staticClass:"text-center pt-5",attrs:{xs12:""}},[a("v-progress-circular",{attrs:{indeterminate:"",color:"primary"}})],1)],1)],1)]:[a("v-layout",[a("v-flex",{attrs:{xs12:""}},[a("v-carousel",t._l(t.promoAds,function(e){return a("v-carousel-item",{key:e.id,attrs:{src:e.imgSrc,"reverse-transition":"fade-transition",transition:"fade-transition"}},[a("div",{staticClass:"car-link"},[a("v-btn",{staticClass:"error",attrs:{to:"/ad/"+e.id}},[t._v(t._s(e.title))])],1)])}),1)],1)],1)]],2),a("v-container",{attrs:{"grid-list-lg":""}},[a("v-layout",{attrs:{row:"",wrap:""}},t._l(t.promoAds,function(e){return a("v-flex",{key:e.id,attrs:{xs12:"",md6:"",lg4:""}},[a("v-card",{staticClass:"mx-auto",attrs:{flat:""}},[a("v-img",{staticClass:"white--text",attrs:{height:"200px",src:e.imgSrc}},[a("v-card-title",{staticClass:"align-end fill-height",staticStyle:{"text-shadow":"0 0 3px #000"}},[t._v(t._s(e.title))])],1),a("v-card-text",[t._v(t._s(e.desc))]),a("v-card-actions",[a("v-spacer"),a("v-btn",{staticClass:"error",attrs:{text:""}},[a("router-link",{attrs:{tag:"span",to:"/ad/"+e.id}},[t._v("Open")])],1),t.isOwner(e)?t._e():a("app-modal-buy",{staticClass:"ml-2",attrs:{ad:e}})],1)],1)],1)}),1)],1)],1)},O=[],S={computed:{promoAds(){return this.$store.getters.promoAds},loading(){return this.$store.getters.loading}},methods:{isOwner(t){return null!==this.$store.getters.user&&t.ownerId===this.$store.getters.user.id}}},T=S,j=(a("021b"),a("b0af")),P=a("99d9"),D=a("5e66"),U=a("3e35"),F=a("a523"),B=a("0e8f"),R=a("adda"),q=a("a722"),z=a("490a"),M=Object(l["a"])(T,A,O,!1,null,null,null),N=M.exports;c()(M,{VBtn:v["a"],VCard:j["a"],VCardActions:P["a"],VCardText:P["b"],VCardTitle:P["c"],VCarousel:D["a"],VCarouselItem:U["a"],VContainer:F["a"],VFlex:B["a"],VImg:R["a"],VLayout:q["a"],VProgressCircular:z["a"],VSpacer:C["a"]});var G=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{staticClass:"fill-height",attrs:{fluid:""}},[a("v-row",{attrs:{align:"center",justify:"center"}},[a("v-col",{attrs:{cols:"12",sm:"8",md:"5"}},[a("v-card",{staticClass:"elevation-12"},[a("v-toolbar",{attrs:{color:"primary",dark:"",flat:""}},[a("v-toolbar-title",[t._v("Login form")])],1),a("v-card-text",[a("v-form",{ref:"form",attrs:{validation:""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a("v-text-field",{attrs:{label:"Email",name:"email","prepend-icon":"mdi-email",type:"text",rules:t.emailRules},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),a("v-text-field",{attrs:{id:"password",label:"Password",name:"password","prepend-icon":"mdi-lock",type:"password",counter:"6",rules:t.passwordRules},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"primary",loading:t.loading,disabled:!t.valid||t.loading},on:{click:t.onSubmit}},[t._v("Login")])],1)],1)],1)],1)],1)},W=[],Y={data(){return{valid:!1,email:"",password:"",emailRules:[t=>!!t||"E-mail is required",t=>/.+@.+/.test(t)||"E-mail must be valid"],passwordRules:[t=>!!t||"Password is required",t=>!!t&&t.length>=6||"Password must be equal or more than 6"]}},computed:{loading(){return this.$store.getters.loading}},methods:{onSubmit(){if(this.$refs.form.validate()){const t={email:this.email,password:this.password};this.$store.dispatch("loginUser",t).then(()=>{this.$router.push("/")}).catch(t=>{})}}},created(){this.$route.query["loginError"]&&this.$store.dispatch("setError","Please log in to access this page")}},H=Y,J=a("62ad"),K=a("4bd4"),Q=a("0fd9"),X=a("8654"),Z=a("71d9"),tt=Object(l["a"])(H,G,W,!1,null,null,null),et=tt.exports;c()(tt,{VBtn:v["a"],VCard:j["a"],VCardActions:P["a"],VCardText:P["b"],VCol:J["a"],VContainer:F["a"],VForm:K["a"],VRow:Q["a"],VSpacer:C["a"],VTextField:X["a"],VToolbar:Z["a"],VToolbarTitle:_["b"]});var at=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{staticClass:"fill-height",attrs:{fluid:""}},[a("v-row",{attrs:{align:"center",justify:"center"}},[a("v-col",{attrs:{cols:"12",sm:"8",md:"5"}},[a("v-card",{staticClass:"elevation-12"},[a("v-toolbar",{attrs:{color:"primary",dark:"",flat:""}},[a("v-toolbar-title",[t._v("Registration form")])],1),a("v-card-text",[a("v-form",{ref:"form",attrs:{validation:""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a("v-text-field",{attrs:{label:"Email",name:"email","prepend-icon":"mdi-email",type:"text",rules:t.emailRules},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),a("v-text-field",{attrs:{id:"password",label:"Password",name:"password","prepend-icon":"mdi-lock",type:"password",counter:"6",rules:t.passwordRules},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),a("v-text-field",{attrs:{id:"confirmId",label:"confirmPassword",name:"confirmPassword","prepend-icon":"mdi-lock",type:"confirmPassword",counter:"6",rules:t.confirmPasswordRules},model:{value:t.confirmPassword,callback:function(e){t.confirmPassword=e},expression:"confirmPassword"}})],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"primary",loading:t.loading,disabled:!t.valid||t.loading},on:{click:t.onSubmit}},[t._v("Create Account")])],1)],1)],1)],1)],1)},rt=[],st={data(){return{valid:!1,email:"",password:"",confirmPassword:"",emailRules:[t=>!!t||"E-mail is required",t=>/.+@.+/.test(t)||"E-mail must be valid"],passwordRules:[t=>!!t||"Password is required",t=>!!t&&t.length>=6||"Password must be equal or more than 6"],confirmPasswordRules:[t=>!!t||"Confirm password is required",t=>!!t&&t===this.password||"Password should match"]}},computed:{loading(){return this.$store.getters.loading}},methods:{onSubmit(){if(this.$refs.form.validate()){const t={email:this.email,password:this.password};this.$store.dispatch("registerUser",t).then(()=>{this.$router.push("/")}).catch(()=>{})}}}},it=st,ot=Object(l["a"])(it,at,rt,!1,null,null,null),nt=ot.exports;c()(ot,{VBtn:v["a"],VCard:j["a"],VCardActions:P["a"],VCardText:P["b"],VCol:J["a"],VContainer:F["a"],VForm:K["a"],VRow:Q["a"],VSpacer:C["a"],VTextField:X["a"],VToolbar:Z["a"],VToolbarTitle:_["b"]});var lt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[t.loading||0===t.myAds.length?t.loading||0!=t.myAds?[a("v-container",[a("v-layout",[a("v-flex",{staticClass:"text-center pt-5",attrs:{xs12:""}},[a("v-progress-circular",{attrs:{indeterminate:"",color:"primary"}})],1)],1)],1)]:[a("h1",{staticClass:"text-center"},[t._v("Sorry, but you don't have any ads")])]:[a("v-layout",{attrs:{"justify-center":""}},[a("v-flex",{attrs:{xs12:"",sm6:""}},[a("h1",{staticClass:"text--secondary mb-5"},[t._v("Ad List")]),t._l(t.myAds,function(e){return a("v-card",{key:e.id,staticClass:"elevation-10 mb-5"},[a("v-layout",[a("v-flex",{attrs:{xs5:""}},[a("v-img",{attrs:{src:e.imgSrc,height:"160"}})],1),a("v-flex",{attrs:{xs7:""}},[a("v-card-text",[a("h2",[t._v(t._s(e.title))]),a("p",[t._v(t._s(e.desc))])]),a("v-card-actions",[a("v-spacer"),a("v-btn",{staticClass:"primary",attrs:{to:"/ad/"+e.id}},[t._v("Open")])],1)],1)],1)],1)})],2)],1)]],2)},dt=[],ct={computed:{myAds(){return this.$store.getters.myAds},loading(){return this.$store.getters.loading}}},ut=ct,mt=Object(l["a"])(ut,lt,dt,!1,null,null,null),pt=mt.exports;c()(mt,{VBtn:v["a"],VCard:j["a"],VCardActions:P["a"],VCardText:P["b"],VContainer:F["a"],VFlex:B["a"],VImg:R["a"],VLayout:q["a"],VProgressCircular:z["a"],VSpacer:C["a"]});var vt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("v-layout",{staticClass:"mb-2",attrs:{"justify-center":""}},[a("v-flex",{attrs:{xs12:"",sm6:""}},[a("h1",{staticClass:"text--secondary mb-3"},[t._v("New Ad")]),a("v-form",{ref:"form",staticClass:"mb-5",attrs:{validation:""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a("v-text-field",{attrs:{label:"Title",name:"title",type:"text",rules:[function(t){return!!t||"Title is required"}]},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}}),a("v-textarea",{attrs:{label:"Description",name:"Description",type:"text","multi-line":"",rules:[function(t){return!!t||"Description is required"}]},model:{value:t.description,callback:function(e){t.description=e},expression:"description"}})],1),a("v-btn",{staticClass:"warning",on:{click:t.openImageUploader}},[t._v("Upload"),a("v-icon",{attrs:{right:"",flat:""}},[t._v("mdi-upload")])],1),t.imageSrc?a("v-btn",{staticClass:"error ml-2",on:{click:t.clearImage}},[t._v("Cancel")]):t._e(),a("input",{ref:"imageUploader",attrs:{type:"file",accept:"image/*",hidden:""},on:{change:t.uploadImage}})],1)],1),a("v-layout",{attrs:{"justify-center":""}},[a("v-flex",{attrs:{xs12:"",sm6:"",lg3:""}},[t.imageSrc?a("img",{attrs:{src:t.imageSrc}}):t._e()])],1),a("v-layout",{attrs:{"justify-center":""}},[a("v-flex",{attrs:{xs12:"",sm6:""}},[a("v-switch",{staticClass:"ma-2",attrs:{label:"Add to promo?"},model:{value:t.promo,callback:function(e){t.promo=e},expression:"promo"}})],1)],1),a("v-layout",{attrs:{"justify-center":""}},[a("v-flex",{attrs:{xs12:"",sm6:"",lg3:""}},[a("v-btn",{staticClass:"primary",attrs:{disabled:!t.valid||!t.imageSrc||t.loading,loading:t.loading},on:{click:t.createAd}},[t._v("Create Ad")])],1)],1)],1)},ht=[],ft={data(){return{valid:!1,description:"",title:"",promo:!1,image:null,imageSrc:""}},computed:{loading(){return this.$store.getters.loading}},methods:{createAd(){if(this.$refs.form.validate()&&this.image){const t={title:this.title,desc:this.description,promo:this.promo,image:this.image};this.$store.dispatch("createAd",t).then(()=>{this.$router.push("/list")}).catch(()=>{})}},openImageUploader(){this.$refs.imageUploader.click()},uploadImage(t){const e=t.target.files[0],a=new FileReader;a.onload=t=>{this.imageSrc=a.result},a.readAsDataURL(e),this.image=e},clearImage(){this.image=null,this.imageSrc=""}}},gt=ft,bt=(a("c6c5"),a("b73d")),xt=a("a844"),yt=Object(l["a"])(gt,vt,ht,!1,null,"f626437c",null),wt=yt.exports;c()(yt,{VBtn:v["a"],VContainer:F["a"],VFlex:B["a"],VForm:K["a"],VIcon:f["a"],VLayout:q["a"],VSwitch:bt["a"],VTextField:X["a"],VTextarea:xt["a"]});var Vt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[t.loading?[a("v-layout",[a("v-flex",{staticClass:"text-center pt-5",attrs:{xs12:""}},[a("v-progress-circular",{attrs:{indeterminate:"",color:"primary"}})],1)],1)]:[a("v-layout",[a("v-flex",{attrs:{xs12:""}},[a("h1",{staticClass:"text--secondary mb-5"},[t._v("Ad")]),a("v-card",{staticClass:"elevation-10"},[a("v-img",{attrs:{src:t.ad.imgSrc,height:"300"}}),a("v-card-text",[a("h2",[t._v(t._s(t.ad.title))]),a("p",[t._v(t._s(t.ad.description))])]),a("v-card-actions",[a("v-spacer"),t.isOwner?a("app-edit-ad",{attrs:{ad:t.ad}}):t._e(),t.isOwner?t._e():a("app-modal-buy",{staticClass:"ml-2",attrs:{ad:t.ad}})],1)],1)],1)],1)]],2)},Ct=[],_t=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-dialog",{attrs:{persistent:"",width:"500"},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on;return[a("v-btn",t._g({staticClass:"warning"},r),[t._v("Edit")])]}}]),model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[a("v-card",[a("v-container",[a("v-layout",[a("v-flex",{attrs:{xs12:""}},[a("v-card-title",{staticClass:"mb-2"},[a("h1",{staticClass:"text--primary"},[t._v("Edit ad")])])],1)],1),a("v-divider"),a("v-layout",[a("v-flex",{attrs:{xs12:""}},[a("v-card-text",[a("v-text-field",{attrs:{label:"Title",name:"title",type:"text"},model:{value:t.editedTitle,callback:function(e){t.editedTitle=e},expression:"editedTitle"}}),a("v-textarea",{attrs:{label:"Description",name:"description"},model:{value:t.editedDescription,callback:function(e){t.editedDescription=e},expression:"editedDescription"}})],1)],1)],1),a("v-divider"),a("v-layout",[a("v-flex",{attrs:{xs12:""}},[a("v-card-actions",{staticClass:"mt-2"},[a("v-spacer"),a("v-btn",{staticClass:"default",on:{click:t.onCancel}},[t._v("Cancel")]),a("v-btn",{staticClass:"primary",attrs:{disabled:t.onEdited},on:{click:t.onSave}},[t._v("Save")])],1)],1)],1)],1)],1)],1)},kt=[],Et={props:["ad"],data(){return{modal:!1,editedTitle:this.ad.title,editedDescription:this.ad.description}},computed:{onEdited(){return this.editedTitle===this.ad.title&&this.editedDescription===this.ad.description||""===this.editedTitle||""===this.editedDescription}},methods:{onCancel(){this.editedTitle=this.ad.title,this.editedDescription=this.ad.description,this.modal=!1},onSave(){this.$store.dispatch("updateAd",{title:this.editedTitle,description:this.editedDescription,id:this.ad.id})}}},Lt=Et,$t=(a("4862"),a("169a")),It=a("ce7e"),At=Object(l["a"])(Lt,_t,kt,!1,null,"3c835aec",null),Ot=At.exports;c()(At,{VBtn:v["a"],VCard:j["a"],VCardActions:P["a"],VCardText:P["b"],VCardTitle:P["c"],VContainer:F["a"],VDialog:$t["a"],VDivider:It["a"],VFlex:B["a"],VLayout:q["a"],VSpacer:C["a"],VTextField:X["a"],VTextarea:xt["a"]});var St={props:["id"],computed:{ad(){const t=this.id;return this.$store.getters.adById(t)},loading(){return this.$store.getters.loading},isOwner(){return null!==this.$store.getters.user&&this.ad.ownerId===this.$store.getters.user.id}},components:{appEditAd:Ot}},Tt=St,jt=(a("e4b1"),Object(l["a"])(Tt,Vt,Ct,!1,null,"3ce673c8",null)),Pt=jt.exports;c()(jt,{VCard:j["a"],VCardActions:P["a"],VCardText:P["b"],VContainer:F["a"],VFlex:B["a"],VImg:R["a"],VLayout:q["a"],VProgressCircular:z["a"],VSpacer:C["a"]});var Dt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("v-layout",{attrs:{"justify-center":""}},[t.loading?a("v-flex",{staticClass:"text-center",attrs:{xs12:""}},[a("v-progress-circular",{attrs:{indeterminate:"",color:"primary"}})],1):t.loading||0===t.orders.length?a("v-flex",{staticClass:"text-center",attrs:{xs12:""}},[a("h1",{staticClass:"text--secondary"},[t._v("You don't have any orders")])]):a("v-flex",{attrs:{xs12:"",md6:""}},[a("h1",{staticClass:"text--secondary"},[t._v("Orders")]),a("v-list",{attrs:{subheader:"","two-line":"",flat:""}},[a("v-list-item-group",{staticClass:"mt-5",attrs:{multiple:""}},t._l(t.orders,function(e){return a("v-list-item",{key:e.id},[[a("v-list-item-action",[a("v-checkbox",{attrs:{color:"primary","input-value":e.done},on:{change:function(a){return t.markDone(e)}}})],1),a("v-list-item-content",[a("v-list-item-title",[t._v(t._s(e.name))]),a("v-list-item-subtitle",[t._v(t._s(e.phone))])],1),a("v-spacer"),a("v-btn",{staticClass:"primary",attrs:{to:"/ad/"+e.adId}},[t._v("Open")])]],2)}),1)],1)],1)],1)],1)},Ut=[],Ft={computed:{loading(){return this.$store.getters.loading},orders(){return this.$store.getters.orders}},created(){this.$store.dispatch("fetchOrders")},methods:{markDone(t){t.done?this.$store.dispatch("markOrderUndone",t.id).then(()=>{t.done=!1}).catch(()=>{}):this.$store.dispatch("markOrderDone",t.id).then(()=>{t.done=!0}).catch(()=>{})}}},Bt=Ft,Rt=a("ac7c"),qt=a("1800"),zt=a("1baa"),Mt=Object(l["a"])(Bt,Dt,Ut,!1,null,null,null),Nt=Mt.exports;c()(Mt,{VBtn:v["a"],VCheckbox:Rt["a"],VContainer:F["a"],VFlex:B["a"],VLayout:q["a"],VList:g["a"],VListItem:b["a"],VListItemAction:qt["a"],VListItemContent:x["a"],VListItemGroup:zt["a"],VListItemSubtitle:x["b"],VListItemTitle:x["c"],VProgressCircular:z["a"],VSpacer:C["a"]});var Gt=a("2f62"),Wt=a("8aa5");class Yt{constructor(t,e,a=!1,r,s,i=null){this.title=t,this.description=e,this.promo=a,this.imgSrc=r,this.ownerId=s,this.id=i}}var Ht={state:{ads:[]},mutations:{createAd(t,e){t.ads.push(e)},loadAds(t,e){t.ads=e},updateAd(t,{title:e,description:a,id:r}){const s=t.ads.find(t=>{return t.id===r});s.title=e,s.description=a}},actions:{async createAd({commit:t,getters:e},a){t("clearError"),t("setLoading",!0);const r=a.image;try{const i=new Yt(a.title,a.desc,a.promo,"",e.user.id),o=await Wt["database"]().ref("ads").push(i),n=r.name.slice(r.name.lastIndexOf(".")),l=await Wt["storage"]().ref(`ads/${o.key}.${n}`).put(r),d=await Wt["storage"]().ref().child(l.ref.fullPath).getDownloadURL();await Wt["database"]().ref("ads").child(o.key).update({imgSrc:d}),t("setLoading",!1),t("createAd",{...i,id:o.key,imgSrc:d})}catch(s){throw t("setError",s.message),t("setLoading",!1),s}},async fetchAds({commit:t}){t("clearError"),t("setLoading",!0);const e=[];try{const r=await Wt["database"]().ref("ads").once("value"),s=r.val();Object.keys(s).forEach(t=>{const a=s[t];e.push(new Yt(a.title,a.description,a.promo,a.imgSrc,a.ownerId,t))}),t("loadAds",e),t("setLoading",!1)}catch(a){throw t("setError",a.message),t("setLoading",!1),a}},async updateAd({commit:t},{title:e,description:a,id:r}){t("setLoading",!0),t("clearError");try{await Wt["database"]().ref("ads").child(r).update({title:e,description:a}),t("updateAd",{title:e,description:a,id:r}),t("setLoading",!1)}catch(s){throw t("setError",s.message),t("setLoading",!1),s}}},getters:{ads(t){return t.ads},promoAds(t){return t.ads.filter(t=>t.promo)},myAds(t,e){return null===e.user?[]:t.ads.filter(t=>{return t.ownerId===e.user.id})},adById(t){return e=>{return t.ads.find(t=>t.id===e)}}}};class Jt{constructor(t){this.id=t}}var Kt={state:{user:null},mutations:{setUser(t,e){t.user=e}},actions:{async registerUser({commit:t},{password:e,email:a}){t("clearError"),t("setLoading",!0);try{const s=await Wt["auth"]().createUserWithEmailAndPassword(a,e);t("setUser",new Jt(s.user.uid)),t("setLoading",!1)}catch(r){throw t("setLoading",!1),t("setError",r.message),r}},async loginUser({commit:t},{email:e,password:a}){t("clearError"),t("setLoading",!0);try{const s=await Wt["auth"]().signInWithEmailAndPassword(e,a);t("setUser",new Jt(s.user.uid)),t("setLoading",!1)}catch(r){throw t("setLoading",!1),t("setError",r.message),r}},autoLogin({commit:t},e){t("setUser",new Jt(e.uid))},logout({commit:t}){Wt["auth"]().signOut(),t("setUser",null)}},getters:{user(t){return t.user},isUserLoggedIn(t){return null!==t.user}}},Qt={state:{loading:!1,error:null},mutations:{setLoading(t,e){t.loading=e},setError(t,e){t.error=e},clearError(t){t.error=null}},actions:{setLoading({commmit:t},e){t("setLoading",e)},setError({commit:t},e){t("setError",e)},clearError({commit:t}){t("clearError")}},getters:{loading(t){return t.loading},error(t){return t.error}}};class Xt{constructor(t,e,a,r=!1,s=null){this.name=t,this.phone=e,this.adId=a,this.done=r,this.id=s}}var Zt={state:{orders:[]},mutations:{loadOrders(t,e){t.orders=e}},actions:{async addOrder({commit:t},{name:e,phone:a,adId:r,ownerId:s}){const i=new Xt(e,a,r);t("clearError");try{await Wt["database"]().ref(`users/${s}/orders`).push(i)}catch(o){throw t("setError",o.message),o}},async fetchOrders({commit:t,getters:e}){t("clearError"),t("setLoading",!0);const a=[];try{const s=await Wt["database"]().ref(`users/${e.user.id}/orders`).once("value"),i=s.val();if(!i)return void t("setLoading",!1);Object.keys(i).forEach(t=>{const e=i[t];a.push(new Xt(e.name,e.phone,e.adId,e.done,t))}),t("loadOrders",a),t("setLoading",!1)}catch(r){throw t("setError",r.message),t("setLoading",!1),r}},async markOrderDone({commit:t,getters:e},a){t("clearError");try{await Wt["database"]().ref(`users/${e.user.id}/orders`).child(a).update({done:!0})}catch(r){throw t("setError",r.message),r}},async markOrderUndone({commit:t,getters:e},a){t("clearError");try{await Wt["database"]().ref(`users/${e.user.id}/orders`).child(a).update({done:!1})}catch(r){throw t("setError",r.message),r}}},getters:{doneOrders(t){return t.orders.filter(t=>t.done)},undoneOrders(t){return t.orders.filter(t=>!t.done)},orders(t,e){return e.doneOrders.concat(e.undoneOrders)}}};r["a"].use(Gt["a"]);var te=new Gt["a"].Store({modules:{ads:Ht,user:Kt,shared:Qt,orders:Zt}}),ee=function(t,e,a){te.getters.user?a():a("/login?loginError=true")};r["a"].use(I["a"]);var ae=new I["a"]({routes:[{path:"",name:"home",component:N},{path:"/ad/:id",props:!0,name:"ad",component:Pt},{path:"/list",name:"list",component:pt,beforeEnter:ee},{path:"/new",name:"new",component:wt,beforeEnter:ee},{path:"/login",name:"login",component:et},{path:"/registration",name:"reg",component:nt},{path:"/orders",name:"orders",component:Nt,beforeEnter:ee}],mode:"history"}),re=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-dialog",{attrs:{persistent:"",width:"500"},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on;return[a("v-btn",t._g({staticClass:"primary",attrs:{dark:""}},r),[t._v("Buy")])]}}]),model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[a("v-card",[a("v-container",[a("v-layout",[a("v-flex",{attrs:{xs12:""}},[a("v-card-title",{staticClass:"mb-2"},[a("h1",{staticClass:"text--primary"},[t._v("Wanna you buy it? "),a("br"),t._v("Fill in the form please.")])])],1)],1),a("v-divider"),a("v-layout",[a("v-flex",{attrs:{xs12:""}},[a("v-card-text",[a("v-text-field",{attrs:{label:"Your name",name:"name",type:"text"},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}}),a("v-text-field",{attrs:{label:"Your phone",name:"phone"},model:{value:t.phone,callback:function(e){t.phone=e},expression:"phone"}})],1)],1)],1),a("v-divider"),a("v-layout",[a("v-flex",{attrs:{xs12:""}},[a("v-card-actions",{staticClass:"mt-2"},[a("v-spacer"),a("v-btn",{staticClass:"default",attrs:{disabled:t.localLoading},on:{click:t.onCancel}},[t._v("Cancel")]),a("v-btn",{staticClass:"primary",attrs:{disabled:t.onFilledIn||t.localLoading,loading:t.localLoading},on:{click:t.onOrder}},[t._v("Buy")])],1)],1)],1)],1)],1)],1)},se=[],ie={props:["ad"],data(){return{modal:!1,name:"",phone:"",localLoading:!1}},computed:{onFilledIn(){return""===this.title||""===this.phone}},methods:{onCancel(){this.name="",this.phone="",this.modal=!1},onOrder(){this.localLoading=!0,this.$store.dispatch("addOrder",{name:this.name,phone:this.phone,adId:this.ad.id,ownerId:this.ad.ownerId}).finally(()=>{this.name="",this.phone="",this.localLoading=!1,this.modal=!1})}}},oe=ie,ne=(a("0a33"),Object(l["a"])(oe,re,se,!1,null,"247e9094",null)),le=ne.exports;c()(ne,{VBtn:v["a"],VCard:j["a"],VCardActions:P["a"],VCardText:P["b"],VCardTitle:P["c"],VContainer:F["a"],VDialog:$t["a"],VDivider:It["a"],VFlex:B["a"],VLayout:q["a"],VSpacer:C["a"],VTextField:X["a"]}),r["a"].component("app-modal-buy",le),r["a"].config.productionTip=!1,new r["a"]({vuetify:$,render:t=>t(E),router:ae,store:te,created(){Wt["initializeApp"]({apiKey:"AIzaSyBHs9yGwzUUhtczctPHFBzZKXpiQGl6Sxc",authDomain:"ads-vue-project.firebaseapp.com",databaseURL:"https://ads-vue-project-69d6a.firebaseio.com",projectId:"ads-vue-project",storageBucket:"ads-vue-project-69d6a.appspot.com",messagingSenderId:"531657238349"}),Wt["auth"]().onAuthStateChanged(t=>{t&&this.$store.dispatch("autoLogin",t)}),this.$store.dispatch("fetchAds")}}).$mount("#app")},"58e3":function(t,e,a){},"5cec":function(t,e,a){},7362:function(t,e,a){"use strict";var r=a("d49f"),s=a.n(r);s.a},c6c5:function(t,e,a){"use strict";var r=a("58e3"),s=a.n(r);s.a},d49f:function(t,e,a){},e4b1:function(t,e,a){"use strict";var r=a("3e36"),s=a.n(r);s.a},fc75:function(t,e,a){}});
//# sourceMappingURL=app.5d82cada.js.map